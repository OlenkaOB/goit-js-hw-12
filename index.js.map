{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryMarkup = photos =>\n  photos\n    .map(\n      photo =>\n        `<li class=\"galleryEl\">\n    <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${photo.webformatURL}\"\n          alt=\"${photo.tags}\"\n          title=\"${photo.tags}\"/>\n      </a>\n        <ul class=\"data-list\">\n          <li class=\"card-text\">\n            <h2 class=\"data-item-name\" >likes</h2>\n            <p class=\"data-numbers\">${photo.likes}</p>\n          </li>\n          <li class=\"card-text\">\n            <h2 class=\"data-item-name\">views</h2>\n            <p class=\"data-numbers\">${photo.views}</p>\n          </li>\n          <li class=\"card-text\">\n            <h2 class=\"data-item-name\">comments</h2>\n            <p class=\"data-numbers\">${photo.comments}</p>\n          </li>\n          <li class=\"card-text\">\n            <h2 class=\"data-item-name\">downloads</h2>\n            <p class=\"data-numbers\">${photo.downloads}</p>\n          </li>\n        </ul>\n      </li>`\n    )\n    .join('');\n","import axios from 'axios';\nexport const BASE_URL = 'https://pixabay.com/';\nexport const API_KEY = '46069997-68364f05efefbed8c9e798952';\n\nexport let currentPage = 1;\nexport let perPage = 15;\n\nexport async function fetchCard(query, currentPage) {\n  const options = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: perPage,\n    page: currentPage,\n  };\n\n  const params = new URLSearchParams(options);\n\n  try {\n    const response = await axios.get(`${BASE_URL}api/?${params}`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createGalleryMarkup } from './js/render-functions';\nimport { perPage, fetchCard } from './js/pixabay-api';\n\nconst form = document.querySelector('form.js-search-form');\nconst gallery = document.querySelector('.gallery');\nconst btnLoader = document.querySelector('button.btn-loader');\n\nlet currentPage = 1;\nlet query = null;\n\nconst showBox = new SimpleLightbox('.galleryEl a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.7,\n  className: 'lightbox',\n});\n\nfunction showLoader() {\n  document.getElementById('loader').style.display = 'block';\n}\n\nfunction hideLoader() {\n  document.getElementById('loader').style.display = 'none';\n}\n\nasync function onButtonSubmit(event) {\n  event.preventDefault();\n  btnLoader.style.display = 'none';\n  currentPage = 1;\n  showLoader();\n\n  const forma = event.currentTarget;\n\n  query = forma.elements.searchValue.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      message: `⚠️ Please fill search input`,\n      position: 'topRight',\n      color: 'yellow',\n    });\n    hideLoader();\n    return;\n  }\n  gallery.innerHTML = '';\n\n  try {\n    const photos = await fetchCard(query);\n    if (!photos.hits || photos.hits.length === 0) {\n      iziToast.show({\n        title: '❌',\n        message: `\"Sorry, there are no images matching your search query. Please try again!\"`,\n        position: 'topRight',\n        color: 'red',\n      });\n      return;\n    }\n    console.log(photos);\n    gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(photos.hits));\n    showBox.refresh();\n    if (photos.totalHits > 15) {\n      btnLoader.style.display = 'block';\n    }\n    return query;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function btnLoaderClick() {\n  try {\n    showLoader();\n    currentPage += 1;\n    const photos = await fetchCard(query, currentPage);\n\n    let totalPages = Math.ceil(photos.totalHits / perPage);\n\n    if (currentPage >= totalPages) {\n      btnLoader.style.display = 'none';\n      iziToast.show({\n        title: '❌',\n        message: `\"We're sorry, but you've reached the end of search results.\"`,\n        position: 'bottomCenter',\n        color: 'blue',\n      });\n    }\n    gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(photos.hits));\n    handleScrollView();\n    showBox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction handleScrollView() {\n  const lastArticle = gallery.lastElementChild;\n  const articleHeight = lastArticle.getBoundingClientRect().height;\n  const scrollHeight = articleHeight * 2;\n\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nbtnLoader.addEventListener('click', btnLoaderClick);\nform.addEventListener('submit', onButtonSubmit);\n"],"names":["createGalleryMarkup","photos","photo","BASE_URL","API_KEY","perPage","fetchCard","query","currentPage","options","params","response","axios","error","form","gallery","btnLoader","showBox","SimpleLightbox","showLoader","hideLoader","onButtonSubmit","event","iziToast","btnLoaderClick","totalPages","handleScrollView","scrollHeight"],"mappings":"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"}